"use strict";(self["webpackChunkvocabTester"]=self["webpackChunkvocabTester"]||[]).push([[851],{9851:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var r=s(3396),a=s(9242),l=s(7139);const c=e=>((0,r.dD)("data-v-95132f92"),e=e(),(0,r.Cn)(),e),d={class:"test"},_={class:"test__message"},o=c((()=>(0,r._)("h4",{class:"test__heading"},"ルール",-1))),n=c((()=>(0,r._)("p",{class:"test__message__rules"},[(0,r.Uk)(" 英単語の記されたカードが数秒おきに追加されていきます。"),(0,r._)("br"),(0,r.Uk)(" いずれかのカードに記された単語をタイピングしたのち、Enterキーで入力を確定してください。"),(0,r._)("br"),(0,r.Uk)(" 場に出ているカードの中に入力された英単語と一致するものがあれば、"),(0,r._)("br"),(0,r.Uk)(" そのカードは除かれ、英単語の文字数に応じたスコアが加算されます。"),(0,r._)("br"),(0,r.Uk)(" 制限時間は60秒です。"),(0,r._)("br"),(0,r._)("br"),(0,r.Uk)(" - スペースキーで開始します - ")],-1))),i=[o,n],u={class:"test__play"},w={class:"test__card__wordPos"},p={class:"test__card__wordUnder"},m={class:"test__card__wordDummy"},h={class:"test__card__desc"},v={class:"test__play__state"},f=c((()=>(0,r._)("div",{class:"test__play__timerDummy"},[(0,r._)("div",{class:"test__play__timer"})],-1))),y={class:"test__result"},I={class:"test__result__stickyDummy"},k={class:"test__result__scorePara"},D=(0,r.Uk)("今回のスコアは"),g={class:"test__resultHL"},b=(0,r.Uk)("点でした"),x=c((()=>(0,r._)("br",null,null,-1))),T=c((()=>(0,r._)("br",null,null,-1))),M=(0,r.Uk)(" スペースキーで最初の画面に戻ります"),S={class:"test__result__wordFlex"},U={class:"test__card__wordPos"},W={class:"test__card__word"},C={class:"test__card__pos"},z={class:"test__card__desc"};function E(e,t,s,c,o,n){return(0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(a.uT,{name:"test__introTra"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",_,i,512),[[a.F8,"introduction"==e.test]])])),_:1}),(0,r.wy)((0,r._)("div",u,[(0,r.Wm)(a.W3,{name:"test__tra",tag:"div",class:"test__play__flex"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.selectedIdx,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"test__card",key:t},[(0,r._)("div",w,[(0,r._)("h4",{class:(0,l.C_)(["test__card__wordInputted",{wordDummy__same:s.wordData[t].name==e.letters}])},(0,l.zw)(s.wordData[t].name.startsWith(e.letters)?s.wordData[t].name.slice(0,e.letters.length):""),3),(0,r._)("h4",p,(0,l.zw)(s.wordData[t].name.slice(0,Math.max(1,e.selectedShow[t]))),1),(0,r._)("h4",m,(0,l.zw)(s.wordData[t].name),1)]),(0,r._)("p",h,(0,l.zw)(s.wordData[t].description),1)])))),128))])),_:1}),(0,r._)("div",v,[f,(0,r._)("p",{class:(0,l.C_)(["test__play__letters",{letters__green:n.selectedWords.includes(e.letters),letters__red:n.selectedWords.every((t=>!t.startsWith(e.letters)))}])},[(0,r.Uk)((0,l.zw)(e.letters),1),(0,r._)("span",{class:(0,l.C_)(["test__play__cursor",{cursorHide:!e.cursorShow}])},"|",2)],2)])],512),[[a.F8,"game"==e.test]]),(0,r.wy)((0,r._)("div",y,[(0,r._)("div",I,[(0,r._)("p",k,[D,(0,r._)("span",g,(0,l.zw)(e.score),1),b,x,T,M])]),(0,r._)("div",S,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.removedWord,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"test__card",key:e},[(0,r._)("div",U,[(0,r._)("h4",W,(0,l.zw)(e.name),1)]),(0,r._)("p",C,"["+(0,l.zw)(e.a)+"]",1),(0,r._)("p",z,(0,l.zw)(e.description),1)])))),128))])],512),[[a.F8,"result"==e.test]])])}var L={name:"TestView",data:function(){return{test:"introduction",letters:"",cursorShow:!0,word_point:0,selectedIdx:[],selectedMap:{},selectedShow:{},cardInterval:"",cursorTimer:"",removedWord:[],score:0}},props:["wordData"],methods:{startTrain:function(){let e=this;e.$nextTick((function(){e.selectedIdx=[],e.selectedMap={},e.selectedShow={},e.word_point=0,e.score=0,e.letters="",e.removedWord=[],e.cursorShow=!0,e.cursorTimer=setInterval((function(){e.cursorShow=!e.cursorShow}),500),e.choiceCards(),e.cardInterval=setInterval((function(){e.choiceCards()}),5e3);let t=Array.from(document.getElementsByClassName("test__play__timer"))[0];t.addEventListener("animationend",(function(){e.selectedIdx=[],e.selectedMap={},e.letters="",clearInterval(e.cardInterval),clearInterval(e.cursorTimer),e.test="result",e.word_point=0}))}))},choiceCards:function(){let e=this,t=e.word_point,s=t;while(s-t<4&&s<10){let t=0;do{t=Math.floor(Math.random()*e.wordData.length)}while(e.selectedIdx.includes(t));e.selectedIdx.push(t),e.selectedShow[t]=0;let r=e.wordData[t];e.selectedMap[r.name]=t,10<r.description.length?s+=2:s+=1}e.word_point=s}},computed:{selectedWords:function(){let e=[];return this.selectedIdx.forEach((t=>{e.push(this.wordData[t].name)})),e}},beforeMount:async function(){const e=this;clearInterval(e.cardInterval),clearInterval(e.cursorTimer),document.addEventListener("keypress",(function(t){"Space"==t.code&&("introduction"==e.test?(e.test="game",e.startTrain()):"result"==e.test&&(e.test="introduction"))})),window.addEventListener("keydown",(function(t){let s=t.key.toLowerCase();if("enter"==s){if(Object.keys(e.selectedMap).includes(e.letters)){let t=e.selectedIdx.indexOf(e.selectedMap[e.letters]);e.selectedIdx.splice(t,1),delete e.selectedShow[t],10<e.letters.length?e.word_point-=2:e.word_point-=1,e.score+=e.letters.length,e.removedWord.push(e.wordData[e.selectedMap[e.letters]]),delete e.selectedMap[e.letters],delete e.selectedShow[e.letters],e.letters=""}}else"backspace"==s?e.letters=e.letters.slice(0,-1):"escape"==s?e.letters="":"-"==s?e.letters+="-":s.match(/^[a-z]$/)&&(e.letters+=s)}))},beforeUnmount:function(){clearInterval(this.cardInterval),clearInterval(this.cursorTimer)}},F=s(89);const H=(0,F.Z)(L,[["render",E],["__scopeId","data-v-95132f92"]]);var P=H}}]);
//# sourceMappingURL=851.43cf0822.js.map